<!DOCTYPE html>
<html lang="zh-CN" class="h-full">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>下一节课</title>
    <link rel="icon" href="/static/favicon.png" type="image/png">
    <script>
        // Anti-flicker script
        if (localStorage.getItem('theme') === 'dark') {
            document.documentElement.classList.add('dark');
        }
    </script>
    <script src="vender/tailwindcss.js"></script>
    <script>
        // 配置Tailwind主题
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        light: {
                            bg: '#f0f5ff',
                            text: '#333',
                            card: '#fff',
                            accent: '#4096ff',
                            accentHover: '#1677ff',
                            btn: '#4096ff',
                            btnHover: '#1677ff'
                        },
                        dark: {
                            bg: '#121212',
                            text: '#E0E0E0',
                            card: '#1A1A1A',
                            accent: '#4096ff', // Blue accent for dark mode
                            btn: '#003366', // Deep Blue
                            btnHover: '#002244',
                            btnText: '#FFFFFF' // White Text
                        }
                    }
                }
            }
        }
    </script>
    <style>
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #d1d5db;
            border-radius: 10px;
        }
        .dark .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #4b5563;
        }
        .dark .weather-icon {
            filter: invert(1) brightness(2);
        }
        /* Autocomplete list transition */
        .autocomplete-items {
            transition: opacity 0.2s ease-out, transform 0.2s ease-out;
            opacity: 0;
            transform: translateY(-10px) scale(0.95);
            pointer-events: none;
        }
        .autocomplete-items.visible {
            opacity: 1;
            transform: translateY(0) scale(1);
            pointer-events: auto;
        }
    </style>
    <script src="js/cache-manager.js"></script>
</head>
<body class="bg-light-bg dark:bg-dark-bg text-light-text dark:text-dark-text font-sans min-h-screen flex flex-col items-center justify-center p-4 transition-colors duration-300">
    <div class="w-full max-w-lg mx-auto bg-light-card dark:bg-dark-card rounded-2xl shadow-xl p-6 sm:p-8 transition-all duration-500 ease-in-out transform opacity-0 translate-y-4" id="main-container">
        <!-- 天气容器 -->
        <div id="weather-container" class="mb-6 hidden">
            <div class="flex justify-between items-center mb-2">
                <h3 class="text-lg font-semibold text-light-text dark:text-dark-text">天气预报</h3>
                <div class="flex space-x-2">
                    <button id="hourly-btn" class="px-3 py-1 text-sm rounded-md bg-light-btn text-white transition-all duration-200 ease-in-out transform hover:scale-105 active:scale-95">按小时</button>
                    <button id="daily-btn" class="px-3 py-1 text-sm rounded-md bg-gray-300 dark:bg-gray-600 transition-all duration-200 ease-in-out transform hover:scale-105 active:scale-95">按天</button>
                </div>
            </div>
            <div id="weather-content" class="flex overflow-x-auto space-x-4 pb-4 custom-scrollbar">
                <!-- 天气卡片将在这里动态生成 -->
            </div>
        </div>
        <div id="result" class="text-center mb-6">
            <!-- 下一节课信息将在这里显示 -->
        </div>

        <!-- 周数选择器容器 -->
        <div id="schedule-header" class="flex justify-between items-center mb-4">
            <h2 id="schedule-title" class="text-xl font-bold text-light-text dark:text-dark-text"></h2>
            <div class="relative autocomplete" style="width: 180px;">
                <input type="text" id="week-selector-input" class="w-full p-2 border rounded bg-white dark:bg-gray-800 dark:text-gray-200 focus:ring-2 focus:ring-light-accent dark:focus:ring-dark-accent cursor-pointer" placeholder="选择周数..." readonly>
                <div id="week-selector-list" class="autocomplete-items absolute hidden w-full bg-light-card dark:bg-dark-card border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl z-10 mt-1 max-h-60 overflow-y-auto">
                    <!-- 周数列表将在这里动态生成 -->
                </div>
            </div>
        </div>

        <div id="weekly-schedule" class="space-y-4 max-h-96 overflow-y-auto custom-scrollbar pr-2">
            <!-- 本周课程表将在这里显示 -->
        </div>
        <div class="mt-6 grid grid-cols-1 sm:grid-cols-1 gap-4">
            <button onclick="window.location.href='index.html'" class="w-full px-4 py-3 bg-light-btn dark:bg-dark-btn text-white hover:bg-light-btnHover dark:hover:bg-dark-btnHover font-semibold rounded-lg shadow-md transition-all duration-200 ease-in-out transform hover:scale-105 active:scale-95 hover:shadow-lg">
                设置界面
            </button>
        </div>
        <!-- GitHub Star Link -->
        <div class="mt-6 text-center">
            <a href="https://github.com/fangguan233/next_class" target="_blank" rel="noopener noreferrer" class="inline-flex items-center text-xs text-gray-500 dark:text-gray-400 hover:text-light-btn dark:hover:text-dark-btn transition-colors duration-200">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="mr-2" viewBox="0 0 16 16">
                    <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
                </svg>
                如果喜欢本项目请 Star
            </a>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const mainContainer = document.getElementById('main-container');
            setTimeout(() => {
                mainContainer.classList.remove('opacity-0', 'translate-y-4');
            }, 100); // A small delay to ensure the transition is applied
        });
    </script>
    <script src="next_class.js"></script>
    <script src="sw-register.js"></script>
</body>
</html>
