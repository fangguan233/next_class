<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>应用管理面板</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        #log-container {
            height: 400px;
            background-color: #1a1a1a;
            color: #d1d5db;
            font-family: 'Courier New', Courier, monospace;
            overflow-y: scroll;
            border-radius: 0.5rem;
            padding: 1rem;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        .status-dot {
            height: 1rem;
            width: 1rem;
            border-radius: 9999px;
            display: inline-block;
        }
        .status-running { background-color: #22c55e; }
        .status-stopped { background-color: #6b7280; }
        .status-crashed { background-color: #ef4444; }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 min-h-screen p-4 sm:p-8">
    <div class="max-w-4xl mx-auto bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6">
        <h1 class="text-3xl font-bold text-center mb-6">应用管理面板</h1>

        <!-- Status Section -->
        <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6">
            <h2 class="text-xl font-semibold mb-3">服务状态</h2>
            <div class="flex items-center space-x-4">
                <div id="status-indicator" class="flex items-center space-x-2">
                    <span id="status-dot" class="status-dot status-stopped"></span>
                    <span id="status-text" class="font-medium text-lg">正在获取...</span>
                </div>
                <div class="text-sm text-gray-500 dark:text-gray-400">
                    <p>PID: <span id="pid-info">N/A</span></p>
                    <p>启动于: <span id="start-time-info">N/A</span></p>
                </div>
            </div>
        </div>

        <!-- Controls Section -->
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6">
            <button id="start-btn" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg transition duration-300 disabled:bg-gray-400">
                启动服务
            </button>
            <button id="stop-btn" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-4 rounded-lg transition duration-300 disabled:bg-gray-400">
                停止服务
</button>
        </div>

        <!-- Logs Section -->
        <div>
            <h2 class="text-xl font-semibold mb-3">实时日志</h2>
            <div id="log-container">
                <p>正在加载日志...</p>
            </div>
        </div>

        <!-- Share Code Management Section -->
        <div class="mt-8">
            <h2 class="text-xl font-semibold mb-3">分享码管理</h2>
            <div class="overflow-x-auto bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                <table class="min-w-full text-sm text-left">
                    <thead class="bg-gray-200 dark:bg-gray-600">
                        <tr>
                            <th class="p-3 font-semibold">分享码</th>
                            <th class="p-3 font-semibold">创建时间</th>
                            <th class="p-3 font-semibold">剩余时间</th>
                            <th class="p-3 font-semibold">操作</th>
                        </tr>
                    </thead>
                    <tbody id="share-codes-tbody">
                        <!-- Rows will be inserted by JavaScript -->
                        <tr><td colspan="4" class="p-4 text-center text-gray-500">正在加载分享码...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='js/admin.js') }}"></script>
</body>
</html>
